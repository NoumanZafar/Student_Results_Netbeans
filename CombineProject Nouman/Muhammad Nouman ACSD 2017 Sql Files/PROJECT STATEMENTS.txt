CREATE TABLE PROGRAMME(

PROG_CODE VARCHAR(30),

PROG_NAME VARCHAR(50) NOT NULL,

DURATION INT(3)DEFAULT 0,

FEES DOUBLE(6,2) NOT NULL,

NFQ_LEVEL INT(3)DEFAULT 0,

TOTAL_ECTS INT(5)DEFAULT 0,

FULL_PART_TIME ENUM('FULL_TIME','PART_TIME') DEFAULT 'FULL_TIME',
DATE_CREATED DATETIME DEFAULT CURRENT_TIMESTAMP,

LAST_UPDATED TIMESTAMP,



PRIMARY KEY(PROG_CODE));



CREATE TABLE MODULE(

MODULE_CODE VARCHAR(30),

MODULE_NAME VARCHAR(50) NOT NULL,

ECTS INT(4) NOT NULL,

DATE_CREATED DATETIME DEFAULT CURRENT_TIMESTAMP,

LAST_UPDATED TIMESTAMP,



PRIMARY KEY(MODULE_CODE));



CREATE TABLE PROG_MODULE(

PROG_CODE VARCHAR(30),

MODULE_CODE VARCHAR(30),

DATE_CREATED DATETIME DEFAULT CURRENT_TIMESTAMP,

LAST_UPDATED TIMESTAMP,



PRIMARY KEY(PROG_CODE,MODULE_CODE),

FOREIGN KEY(PROG_CODE) REFERENCES PROGRAMME(PROG_CODE) ON DELETE CASCADE ON UPDATE CASCADE,

FOREIGN KEY(MODULE_CODE) REFERENCES MODULE(MODULE_CODE) ON DELETE CASCADE ON UPDATE CASCADE);



CREATE TABLE CLASS_GROUP(

GROUP_ID VARCHAR(5),

PROG_CODE VARCHAR(30) NOT NULL,

DATE_CREATED DATETIME DEFAULT CURRENT_TIMESTAMP,

LAST_UPDATED TIMESTAMP,



PRIMARY KEY(GROUP_ID),

FOREIGN KEY (PROG_CODE) REFERENCES PROGRAMME(PROG_CODE) ON DELETE CASCADE ON UPDATE CASCADE);



CREATE TABLE TEACHER(

TEACHER_ID VARCHAR(30),

TITLE ENUM('MR','MRS','MS','MISS','DR','PROF') DEFAULT 'PROF',

FIRST_NAME VARCHAR(40) NOT NULL,

LAST_NAME VARCHAR(40) NOT NULL,

ADDRESS_1 VARCHAR(50) NOT NULL,

ADDRESS_2 VARCHAR(50) NOT NULL,

CITY VARCHAR(50) NOT NULL,

NATIONALITY VARCHAR(50),

DOB DATE,

GENDER ENUM('MALE','FEMALE') NOT NULL,
EMAIL VARCHAR(40) NOT NULL,

TELEPHONE_NUMBER VARCHAR(15) UNIQUE,

LOGIN_PASSWORD VARCHAR(20) NOT NULL UNIQUE,

IMAGE BLOB DEFAULT NULL,
DATE_CREATED DATETIME DEFAULT CURRENT_TIMESTAMP,

LAST_UPDATED TIMESTAMP,
PRIMARY KEY(TEACHER_ID));



CREATE TABLE TEACHER_TEACH(

MODULE_CODE VARCHAR(30),

GROUP_ID VARCHAR(5),

TEACHER_ID VARCHAR(30),

DATE_CREATED DATETIME DEFAULT CURRENT_TIMESTAMP,

LAST_UPDATED TIMESTAMP,



PRIMARY KEY(MODULE_CODE,GROUP_ID,TEACHER_ID),

FOREIGN KEY(MODULE_CODE) REFERENCES MODULE(MODULE_CODE) ON DELETE CASCADE ON UPDATE CASCADE,

FOREIGN KEY(GROUP_ID) REFERENCES CLASS_GROUP(GROUP_ID) ON DELETE CASCADE ON UPDATE CASCADE,

FOREIGN KEY(TEACHER_ID) REFERENCES TEACHER(TEACHER_ID) ON DELETE CASCADE ON UPDATE CASCADE);



CREATE TABLE STUDENT(

STUDENT_ID VARCHAR(30),

TITLE ENUM('','MR','MRS','MS','MISS') DEFAULT '',

FIRST_NAME VARCHAR(40) NOT NULL,

LAST_NAME VARCHAR(40) NOT NULL,

ADDRESS_1 VARCHAR(50) NOT NULL,

ADDRESS_2 VARCHAR(50) NOT NULL,

CITY VARCHAR(50) NOT NULL,

NATIONALITY VARCHAR(50),

DOB DATE,

GENDER ENUM('MALE','FEMALE') NOT NULL,
EMAIL VARCHAR(40) NOT NULL,

TELEPHONE_NUMBER VARCHAR(15) UNIQUE,

GROUP_ID VARCHAR(5) NOT NULL,

IMAGE BLOB DEFAULT NULL,
DATE_CREATED DATETIME DEFAULT CURRENT_TIMESTAMP,

LAST_UPDATED TIMESTAMP,



PRIMARY KEY(STUDENT_ID),

FOREIGN KEY (GROUP_ID) REFERENCES CLASS_GROUP(GROUP_ID) ON DELETE CASCADE ON UPDATE CASCADE);



CREATE TABLE RESULTS(

MODULE_CODE VARCHAR(30),

STUDENT_ID VARCHAR(30),

ASSESSMENT_1 DOUBLE(4,2) DEFAULT 0.0,

ASSESSMENT_2 DOUBLE(4,2) DEFAULT 0.0,

ASSESSMENT_3 DOUBLE(4,2) DEFAULT 0.0,

ASSESSMENT_4 DOUBLE(4,2) DEFAULT 0.0,

EXAM DOUBLE(4,2) DEFAULT 0.0,



PRIMARY KEY(MODULE_CODE,STUDENT_ID),

FOREIGN KEY (MODULE_CODE) REFERENCES MODULE(MODULE_CODE) ON DELETE CASCADE ON UPDATE CASCADE,

FOREIGN KEY(STUDENT_ID) REFERENCES STUDENT(STUDENT_ID) ON DELETE CASCADE ON UPDATE CASCADE);


